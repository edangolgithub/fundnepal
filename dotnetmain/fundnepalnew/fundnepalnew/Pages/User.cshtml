@page
@model UserModel
@using System.Net.Http
@using Newtonsoft.Json
@{
    ViewData["Title"] = "user";
}
<h2>Data from User Dynamo Table</h2>

<p>
    @{
        List<User> ulist = new List<User>();
          using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri("https://p82kvytjaa.execute-api.us-east-1.amazonaws.com/Stage");
            //HTTP GET
            var responseTask = client.GetAsync("");
            responseTask.Wait();

            var result = responseTask.Result;
            var userdata= await result.Content.ReadAsStringAsync();
            ulist = JsonConvert.DeserializeObject<List<User>>(userdata);
        }
        
    }
   
<div class="container">
    <table class="table table-dark">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Profile</th>
                <th>Access</th>
            </tr>
        </thead>
        <tbody>
          
      
    @{
        foreach (User item in ulist)
        {
              <tr>
                <td>@item.Id</td>
                <td>@item.Name</td>
                <td>@item.Profile</td>
                <td>@item.Access</td>
            </tr>
        }
    }
         
        </tbody>
    </table>
</div>
</p>
